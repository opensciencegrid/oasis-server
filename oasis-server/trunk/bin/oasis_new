#!/usr/bin/python

# =========================================================================== #
#                                                                             #
#   temporary file for development                                            #
#   when finished, it will become the new oasis CLI                           #
#                                                                             #
# =========================================================================== #

import getopt
import os
import sys
import time

from oasispackage.oasisAPI import oasisCLI, FlagFile


"""
This is the CLI interface to OASIS package. 
It can be used to run the user part of OASIS, 
either directly from command line
or from another client, e.g. HTCondor.
"""
#
# FIXME
# this script is very similar to bin/oasisd
# should they be merged?
#

def main(args):
    '''
    args are the user payload and inputs options, as a python list.
    For example, when invoked by condor, it looks like this:

            ['/var/lib/condor/execute/dir_15018/condor_exec.exe', 'a', 'b', 'c', '1', '2', '3'] 
    '''

    # FIXME !! figure out how to pass the path to oasis.conf as a variable instead of hardcoded
    # set the path to config file oasis.conf
    conffile = '/etc/oasis/oasis.conf'
    oasis = oasisCLI(conffile)

    # run
    rc = oasis.run(args)
    # FIXME!!
    # maybe it is not a good idea to pass that type of args, 
    # because they have equals '=' and those stuffs.
    # perhaps the parsing should be done in the __main__ section
    # and pass to the class a nice result
    return rc


if __name__ == '__main__':
    rc = main(sys.argv[1:])
    sys.exit(rc)
