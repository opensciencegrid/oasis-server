#!/usr/bin/python

#####################################################################
#                                                                   #
#  this is just a temporary solution                                #
#                                                                   #
#  the functionalities of this script will be included              #
#  in /usr/bin/oasis                                                #
#                                                                   #
#####################################################################

import getopt
import os
import sys
import time

from oasispackage.oasisAPI import oasisCLI, FlagFile


def main():

    conffile = '/etc/oasis/oasis.conf'

    oasis = oasisCLI(conffile)

    projectname = oasis.project.projectname

    flag = FlagFile(projectname)
    flag.create()

    oasis.project._checkflagfile()  # temporary solution ?

    oasis.project.runprobes()
    # FIXME
    # It does not work, because runprobes() calls each probe with sudo
    # therefore, when running this directly as user, it fails because the user
    # is not in the sudoers file

    return rc


if __name__ == '__main__':
    rc = main()
    sys.exit(rc)
